TOKENIZER:
  MIN_LEN: 2
  BACKEND: "simple"
  LOWERCASE: true
  ASCII_FOLD: false
  REMOVE_STOPWORDS: true
  STEM: false
  NUMBER_NORMALIZE: false
  NUM_WORKERS: 0 # set to 0 to use os.cpu_count()
  STORE_POSITIONS: false
  STORE_TOKENS: false

CHUNKER:
  MAX_CHUNK_SIZE: 80
  MIN_CHUNK_SIZE: 30
  CHUNK_OVERLAP: 10
  ENABLE: true

DOCUMENTS: "data/msmarco-docs.tsv"
DOCUMENT_OFFSETS: "data/msmarco-offsets.pkl"
INDEX_INTERVAL: 50
DATA_PATH: "data/"
BLOCK_PATH: "data/blocks/"
HEADER_BLOCK_FILE: "SEAB\x01"
HEADER_INDEX_FILE: "SEAI\x01"
HEADER_POSTING_FILE: "SEAP\x01"
HEADER_DOC_DICT_FILE: "SEAD\x01"
LOG_PATH: "data/log.txt"

SEARCH:
  RETRIEVAL: "semantic"  # "bm25" or "semantic"
  MAX_RESULTS: 10
  POSTINGS_CUT: 1000
  EXPAND_QUERIES: false  # SPLADE query expansion (only for bm25)
  NUM_DOCS: 32000
  AVG_DOC_LEN: 100.0
  VERBOSE_OUTPUT: true
  RERANKER:
    ENABLED: false  # LTR reranker on top of retrieval
    MODEL_PATH: "artifacts/tfr_reranker/model.keras"
    CANDIDATE_TOPN: 200
  FIELDED:
    ACTIVE: true
    FIELDS: ["title", "body", "url"]
    LENGTHS:
      title: 20.0
      body: 80.0
      url: 10.0
    WEIGHTS:
      title: 2.0
      body: 1.0
      url: 1.5

SEMANTIC:
  SERVICE_URL: "http://localhost:8001"
  SERVICE_PORT: 8001
  MODEL_ID: "nomic-ai/nomic-embed-text-v1.5"
  DIM: 64
  DEVICE: "mps"
  BATCH_SIZE: 16  # for indexing


BM25:
  K1: 1.5
  B: 0.75

INGESTION:
  NUM_DOCUMENTS: -1  # -1 = all documents, or specify a limit
  BATCH_SIZE: 1000

QUERY:
  MAX_PHRASE_LEN: 5

SPLADE:
  MODEL_ID: "naver/splade-cocondenser-ensembledistil"
  DEVICE: "cuda:0"  # options: "cpu", "cuda:0", etc.
  THRESHOLD: 0.01
  CACHE_DIR: "cache/splade"
  CAP_EXPANSION: 2

LTR:
  DATA_DIR: "data"
  QUERIES: "data/msmarco-doctrain-queries.tsv"
  QRELS: "data/msmarco-doctrain-qrels.tsv"
  SPLIT_DIR: "data/splits"
  TRAIN_CACHE: "data/test_cache.npz"
  VAL_CACHE: "data/test_cache.npz"
  CANDIDATE_TOPN: 200
  LIST_SIZE: 100
  EPOCHS: 1
  BATCH_SIZE: 1024
  LEARNING_RATE: 0.001
  SCHEDULER:
    TYPE: "cosine"  # options: "none", "exponential", "cosine"
    DECAY_STEPS: 10000
    DECAY_RATE: 0.9
    ALPHA: 0.1
  SEED: 42
  MODEL:
    HIDDEN_UNITS: [512, 256, 128]
    DROPOUT: 0.1
    USE_ATTENTION: true
  WANDB:
    PROJECT: "SEA-WiSe-2025-26"
    GROUP: "reranker"
    LOG_MODEL: true
  FEATURES:
    - "bm25_score"
    - "query_len"
    - "query_uniq_len"
    - "title_len"
    - "body_len"
    - "title_overlap_cnt"
    - "body_overlap_cnt"
    - "body_overlap_ratio"
    - "idf_body_overlap_sum"
    - "idf_title_overlap_sum"
